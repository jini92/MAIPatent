**n8n과 Claude Code를 이용한 지능형 특허 명세서 작성 자동화 시스템**에 대한 제품 요구사항 문서(PRD)를 작성해 드립니다.

---

# [PRD] n8n & Claude Code 기반 지능형 특허 명세서 작성 자동화 시스템

## 1. 프로젝트 개요
본 프로젝트는 **n8n**의 워크플로우 오케스트레이션 능력과 **Claude Code**의 에이전틱(Agentic) 문제 해결 능력을 결합하여, 발명 제안서로부터 한국 특허청(KIPO) 규격에 맞는 명세서를 자동 생성하는 시스템을 구축하는 것을 목표로 합니다.

## 2. 목표 및 핵심 가치
*   **작성 시간 단축:** 수동 작업 대비 명세서 초안 작성 시간을 최대 **80% 이상 단축**합니다.
*   **법적 안정성 확보:** 용어 불일치, 전제 기초(Antecedent Basis) 결여 등 인간이 저지르기 쉬운 논리적 오류를 최소화합니다.
*   **품질 상향 평준화:** **CLAUDE.md** 지침 파일을 통해 숙련된 변리사의 노하우를 워크플로우에 반영하여 일관된 품질을 유지합니다.

## 3. 사용자 및 시장 환경
*   **주요 사용자:** 특허법인 변리사, 기업 IP 담당자, 특허 명세사.
*   **배경:** 인공지능 기술의 발전으로 지식재산 창출 프로세스가 수동적 문서 작성에서 지능형 에이전트 기반 자동화로 전환되고 있습니다.

## 4. 핵심 기능 요구사항 (Core Features)

### 4.1. n8n 기반 데이터 오케스트레이션
*   **입력 인터페이스:** 구글 드라이브나 웹훅(Webhook)을 통해 발명 제안서를 수집합니다.
*   **컨텍스트 보강:** **KIPRIS API**를 연동하여 관련 선행 기술 요약본을 수집하고 Claude Code의 프롬프트에 포함합니다.
*   **비동기 처리:** 'Wait' 노드를 활용하여 인간 전문가의 중간 검수 프로세스를 통합합니다 (**Human-in-the-loop**).

### 4.2. Claude Code 에이전틱 엔진
*   **섹션별 순차 생성:** 한 번에 전체를 작성하지 않고 **청구항 $\rightarrow$ 상세한 설명 $\rightarrow$ 도면 설명** 순으로 상호 검증하며 생성합니다.
*   **Extended Thinking 활용:** 복잡한 논리 구조가 필요한 청구항 작성 시 Anthropic의 심층 사고 기능을 호출하여 신규성과 진보성을 최대화합니다.
*   **CLI 제어:** n8n의 **Execute Command** 노드를 통해 서버에 설치된 Claude Code CLI를 직접 실행하여 로컬 파일 시스템을 제어합니다.

### 4.3. 포맷팅 및 규격 준수
*   **KIPO 표준 준수:** 【발명의 명칭】, 【특허청구범위】 등 한국 특허청 표준 식별 기호를 자동 삽입합니다.
*   **문서 변환:** 생성된 마크다운(Markdown) 문서를 **Pandoc**을 이용해 `.docx` 또는 `.pdf`로 변환하며, 이때 KIPO 표준 스타일 템플릿을 적용합니다.

## 5. 기술적 요구사항 (Technical Specifications)

### 5.1. 인프라 및 환경 설정
*   **서버:** Ubuntu 기반 셀프 호스팅 환경 권장 (CLI 권한 확보 목적).
*   **보안 설정:** n8n 2.0 이상 버전에서 `NODES_EXCLUDE="[]"` 환경 변수를 설정하여 **Execute Command** 노드를 활성화해야 합니다.
*   **인증:** 시스템 환경 변수에 `ANTHROPIC_API_KEY`를 등록하여 Claude Code가 API를 호출할 수 있도록 구성합니다.

### 5.2. 프롬프트 엔지니어링 (CLAUDE.md)
*   **지침 파일 구성:** 프로젝트 루트에 **CLAUDE.md**를 생성하여 금지 어구(예: "완벽한", "절대적인"), 도면 부호 명명 규칙, 기술 용어집을 정의합니다.

## 6. 보안 및 규정 준수 (Security & Compliance)
*   **제로 데이터 보존(ZDR):** 기업용 API 키를 사용하여 입력 데이터가 모델 학습에 활용되지 않도록 **Zero Data Retention** 설정을 적용합니다.
*   **데이터 격리:** Docker 컨테이너를 사용하여 n8n 프로세스를 격리하고 작업 완료 후 임시 파일을 즉시 삭제하는 프로세스를 포함합니다.
*   **비밀 유지:** 미공개 출원 정보 취급 시 Anthropic의 상업용 제품 보안 가이드라인을 철저히 준수합니다.

## 7. 성공 지표 (KPI)
*   **초안 작성 속도:** 기존 대비 작성 시간 60~80% 감소.
*   **수정 횟수:** 전문가 검수 단계에서 발생하는 용어 수정 및 논리 오류 지적 횟수 감소.
*   **제출 완결성:** 특허청 전자출원 시스템(Patent-Ro) 업로드 시 포맷 오류 발생률 0% 지향.

---
**비유:** 이 시스템은 마치 **숙련된 명세사가 지휘하는 오케스트라**와 같습니다. n8n은 각 파트의 연주 순서를 정하는 **지휘자** 역할을 하고, Claude Code는 각 악기를 능숙하게 연주하여 아름다운 교향곡(완성된 명세서)을 만들어내는 **수석 연주자** 역할을 수행합니다.