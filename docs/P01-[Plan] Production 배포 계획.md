# P01 - Production ë°°í¬ ê³„íš

> **ì‘ì„±ì¼**: 2026-01-12
> **ìƒíƒœ**: ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ
> **ë‹´ë‹¹**: DevOps

---

## 1. ê°œìš”

MAIPatent ì‹œìŠ¤í…œì˜ Production í™˜ê²½ ë°°í¬ ë° ìš´ì˜ ê³„íš ë¬¸ì„œì…ë‹ˆë‹¤.

### ë°°í¬ ëª©í‘œ
- ì•ˆì •ì ì¸ Production í™˜ê²½ êµ¬ì¶•
- ëª¨ë‹ˆí„°ë§ ë° ë¡¤ë°± ì²´ê³„ ìˆ˜ë¦½
- ìš´ì˜ ê°€ì´ë“œë¼ì¸ ì •ë¦½

### ë°°í¬ êµ¬ì„±ìš”ì†Œ
| êµ¬ì„±ìš”ì†Œ | í”Œë«í¼ | ìš©ë„ |
|----------|--------|------|
| Frontend | GitHub Pages | ì •ì  ì›¹ì‚¬ì´íŠ¸ (Next.js SSG) |
| Backend | n8n Cloud | ì›Œí¬í”Œë¡œìš° ìë™í™” |
| Storage | Google Drive/Sheets | ë¬¸ì„œ ì €ì¥ ë° ì§„í–‰ ì¶”ì  |

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Production Environment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPS     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   GitHub Pages   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   ì‚¬ìš©ì ë¸Œë¼ìš°ì €      â”‚    â”‚
â”‚  â”‚  (Static Export) â”‚              â”‚                      â”‚    â”‚
â”‚  â”‚  Next.js 14 SSG  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚           â”‚                                                     â”‚
â”‚           â”‚ Webhook (CORS enabled)                              â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚   n8n Cloud      â”‚                                          â”‚
â”‚  â”‚  (mai-n8n.app)   â”‚                                          â”‚
â”‚  â”‚                  â”‚                                          â”‚
â”‚  â”‚  WF01 â”€â”€â–º WF02 â”€â”€â–º WF03 â”€â”€â–º WF04                           â”‚
â”‚  â”‚  ì…ë ¥     ê²€ìƒ‰     ìƒì„±     ê²€ìˆ˜                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚           â”‚                                                     â”‚
â”‚           â”‚ OAuth2                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Google Drive    â”‚   â”‚  Google Sheets   â”‚                   â”‚
â”‚  â”‚  (ë¬¸ì„œ ì €ì¥)      â”‚   â”‚  (ì§„í–‰ ì¶”ì )      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ì‚¬ì „ ê²€ì¦ âœ… (ì™„ë£Œ)
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 42ê°œ í†µê³¼
- [x] E2E í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
- [x] CORS ì„¤ì • ê²€ì¦
- [x] Webhook ì‘ë‹µ ê²€ì¦ (executionId: `WF01-timestamp`)

### Phase 2: ì¸í”„ë¼ ì¤€ë¹„
| í•­ëª© | ìƒíƒœ | ë‹´ë‹¹ | ë¹„ê³  |
|------|------|------|------|
| GitHub Pages ë°°í¬ | âœ… ì™„ë£Œ | CI/CD | ìë™ ë°°í¬ íŒŒì´í”„ë¼ì¸ |
| n8n Cloud ì›Œí¬í”Œë¡œìš° | âœ… ì™„ë£Œ | ìë™í™” | WF01-WF04 í™œì„±í™” |
| ANTHROPIC_API_KEY | âš ï¸ í™•ì¸ í•„ìš” | n8n Credentials | WF03 Claude API í˜¸ì¶œìš© |
| Google Drive ì—°ë™ | ğŸ”µ ì„ íƒì‚¬í•­ | ì‚¬ìš©ì ì„¤ì • | I09 ë¬¸ì„œ ì°¸ì¡° |

### Phase 3: Production ë°°í¬ ì‹¤í–‰

#### Step 1: í™˜ê²½ í™•ì¸
```bash
# Frontend ìƒíƒœ í™•ì¸
curl -I https://jini92.github.io/MAIPatent/

# n8n Webhook ìƒíƒœ í™•ì¸
curl -X POST https://mai-n8n.app.n8n.cloud/webhook/wf01-invention-input \
  -H "Content-Type: application/json" \
  -d '{"test": true}'
```

#### Step 2: ë¹Œë“œ ë° ë°°í¬
```bash
# 1. ì›¹ ë¹Œë“œ í…ŒìŠ¤íŠ¸
cd web && npm run build && npm run lint

# 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cd .. && node tests/run-all-tests.js

# 3. Git Push (ìë™ ë°°í¬ íŠ¸ë¦¬ê±°)
git add .
git commit -m "chore: production ë°°í¬ ì¤€ë¹„"
git push origin main

# 4. GitHub Actions í™•ì¸
# https://github.com/jini92/MAIPatent/actions
```

#### Step 3: ë°°í¬ í›„ ê²€ì¦
- [ ] Frontend í˜ì´ì§€ ë¡œë”© í™•ì¸
- [ ] ë°œëª… ì œì•ˆì„œ í¼ ì œì¶œ í…ŒìŠ¤íŠ¸
- [ ] Webhook ì‘ë‹µ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ ëª¨ë‹ˆí„°ë§

---

## 4. ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸

### 4.1 Frontend URL
| í˜ì´ì§€ | URL |
|--------|-----|
| í™ˆ | https://jini92.github.io/MAIPatent/ |
| ë°œëª… ì œì•ˆì„œ | https://jini92.github.io/MAIPatent/submit/ |
| ëŒ€ì‹œë³´ë“œ | https://jini92.github.io/MAIPatent/dashboard/ |
| ì§„í–‰ ì¶”ì  | https://jini92.github.io/MAIPatent/tracking/ |
| ê²€ìˆ˜ ëŒ€ê¸° | https://jini92.github.io/MAIPatent/review/ |
| ë‚´ë³´ë‚´ê¸° | https://jini92.github.io/MAIPatent/export/ |

### 4.2 n8n Webhook ì—”ë“œí¬ì¸íŠ¸
| ì›Œí¬í”Œë¡œìš° | Webhook URL | ë©”ì„œë“œ |
|------------|-------------|--------|
| WF01 ë°œëª…ì œì•ˆì„œì…ë ¥ | `https://mai-n8n.app.n8n.cloud/webhook/wf01-invention-input` | POST |
| WF02 ì„ í–‰ê¸°ìˆ ê²€ìƒ‰ | `https://mai-n8n.app.n8n.cloud/webhook/wf02-prior-art-search` | POST |
| WF03 ëª…ì„¸ì„œìƒì„± | `https://mai-n8n.app.n8n.cloud/webhook/wf03-generate-patent-spec` | POST |
| WF04 ëª…ì„¸ì„œê²€ìˆ˜ | `https://mai-n8n.app.n8n.cloud/webhook/wf04-review-request` | POST |

### 4.3 í—¬ìŠ¤ì²´í¬
| ì„œë¹„ìŠ¤ | í™•ì¸ ë°©ë²• | ì˜ˆìƒ ì‘ë‹µ |
|--------|----------|----------|
| Frontend | `curl -I {URL}` | HTTP 200 |
| WF01 Webhook | `curl -X POST {URL}` | `{"executionId": "WF01-xxx"}` |

---

## 5. ìš´ì˜ ëª¨ë‹ˆí„°ë§

### 5.1 ë¡œê·¸ í™•ì¸ ìœ„ì¹˜
| ì‹œìŠ¤í…œ | ìœ„ì¹˜ | í™•ì¸ ë°©ë²• |
|--------|------|----------|
| Frontend ë°°í¬ | GitHub Actions | Actions íƒ­ â†’ workflow runs |
| n8n ì›Œí¬í”Œë¡œìš° | n8n Cloud | Executions ë©”ë‰´ |
| ë¸Œë¼ìš°ì € ì—ëŸ¬ | Browser DevTools | Console íƒ­ |

### 5.2 ì•Œë¦¼ ì„¤ì • (ê¶Œì¥)
- **GitHub**: Actions ì‹¤íŒ¨ ì‹œ ì´ë©”ì¼ ì•Œë¦¼
- **n8n**: ì›Œí¬í”Œë¡œìš° ì‹¤íŒ¨ ì‹œ Slack/Email ì•Œë¦¼

### 5.3 ì•Œë ¤ì§„ ì´ìŠˆ
| ì´ìŠˆ | ì˜í–¥ | ìš°ì„ ìˆœìœ„ | ìƒíƒœ |
|------|------|----------|------|
| basePath ì¤‘ë³µ ë§í¬ | ë„¤ë¹„ê²Œì´ì…˜ í´ë¦­ ì‹œ 404 | ë‚®ìŒ | ë¯¸í•´ê²° |

---

## 6. ë¡¤ë°± ê³„íš

### 6.1 Frontend ë¡¤ë°±
```bash
# GitHub Actionsì—ì„œ ì´ì „ ì„±ê³µ ë°°í¬ë¡œ ë¡¤ë°±
# 1. Actions íƒ­ â†’ ì´ì „ ì„±ê³µ ì›Œí¬í”Œë¡œìš° ì„ íƒ
# 2. "Re-run jobs" í´ë¦­

# ë˜ëŠ” ìˆ˜ë™ ë¡¤ë°±
git revert HEAD
git push origin main
```

### 6.2 n8n ì›Œí¬í”Œë¡œìš° ë¡¤ë°±
```
1. n8n Cloud ì ‘ì†
2. í•´ë‹¹ ì›Œí¬í”Œë¡œìš° í¸ì§‘ í™”ë©´ ì—´ê¸°
3. History íƒ­ì—ì„œ ì´ì „ ë²„ì „ ì„ íƒ
4. "Restore" í´ë¦­
5. Publish ë²„íŠ¼ìœ¼ë¡œ í™œì„±í™”
```

### 6.3 ê¸´ê¸‰ ëŒ€ì‘
| ìƒí™© | ëŒ€ì‘ |
|------|------|
| Frontend ì ‘ì† ë¶ˆê°€ | GitHub Pages ì„¤ì • í™•ì¸, DNS ìºì‹œ í´ë¦¬ì–´ |
| Webhook ì‹¤íŒ¨ | n8n ì›Œí¬í”Œë¡œìš° í™œì„±í™” ìƒíƒœ í™•ì¸ |
| CORS ì˜¤ë¥˜ | Webhook ë…¸ë“œ CORS ì„¤ì • í™•ì¸ |
| API í‚¤ ë§Œë£Œ | Credentials ê°±ì‹  |

---

## 7. ì‹¤í–‰ ìˆœì„œ ìš”ì•½

```
Production ë°°í¬ ì‹¤í–‰ ìˆœì„œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. [í™•ì¸] n8n ANTHROPIC_API_KEY ì„¤ì • ì—¬ë¶€ í™•ì¸
   â””â”€ n8n Cloud â†’ Credentials â†’ Anthropic API

2. [ì‹¤í–‰] Production ë¹Œë“œ í…ŒìŠ¤íŠ¸
   â””â”€ cd web && npm run build && npm run lint

3. [ì‹¤í–‰] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
   â””â”€ node tests/run-all-tests.js

4. [ë°°í¬] Git push â†’ GitHub Actions ìë™ ë°°í¬
   â””â”€ git push origin main

5. [ê²€ì¦] í—¬ìŠ¤ì²´í¬ ë° E2E í…ŒìŠ¤íŠ¸
   â””â”€ curl -I https://jini92.github.io/MAIPatent/

6. [ëª¨ë‹ˆí„°ë§] ë¡œê·¸ í™•ì¸ ë° ì•Œë¦¼ ì„¤ì •
   â””â”€ GitHub Actions, n8n Executions
```

---

## 8. ì°¸ì¡° ë¬¸ì„œ

| ë¬¸ì„œ | ìœ„ì¹˜ | ì„¤ëª… |
|------|------|------|
| ë°°í¬ ê°€ì´ë“œ | `docs/I07-[Guide] ë°°í¬ ê°€ì´ë“œ.md` | í™˜ê²½ ì„¤ì • ë° ë°°í¬ ì ˆì°¨ |
| Web UI êµ¬í˜„ | `docs/I08-[Implementation] Web UI êµ¬í˜„.md` | í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ìƒì„¸ |
| Google Drive ì—°ë™ | `docs/I09-[Implementation] Google Drive ì—°ë™.md` | ìŠ¤í† ë¦¬ì§€ ì—°ë™ ê°€ì´ë“œ |
| E2E í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ | `docs/T02-[Test] E2E í†µí•© í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸.md` | í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìƒì„¸ |
| ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ | `docs/A02-[Architecture] ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜.md` | ì „ì²´ ì‹œìŠ¤í…œ ì„¤ê³„ |

---

*ë¬¸ì„œ ë²„ì „: 1.0.0*
*ì‘ì„±ì¼: 2026-01-12*
